<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>TechPulse Signals</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px auto; max-width: 800px; line-height: 1.5; }
    h1 { font-size: 2rem; font-weight: bold; margin-bottom: 20px; }
    ul { list-style: none; padding: 0; }
    li { margin-bottom: 12px; border-bottom: 1px solid #e0e0e0; padding-bottom: 8px; }
    a { color: #0366d6; text-decoration: none; }
    a:hover { text-decoration: underline; }
    .date { display:block; font-size: 0.75rem; color: #6a737d; margin-top: 4px; }
  </style>
</head>
<body>
  <h1>TechPulse Signals</h1>
  <p id="status">Loading tech signals...</p>
  <ul id="list" style="display:none;"></ul>
<script>
const FEEDS = [
  'https://techcrunch.com/feed/',
  'https://feeds.arstechnica.com/arstechnica/index',
  'https://www.theverge.com/rss/index.xml',
  'https://hnrss.org/frontpage',
  'https://www.reddit.com/r/MachineLearning/.rss',
  'https://www.reddit.com/r/technology/.rss',
  'https://www.wired.com/feed/rss',
  'https://www.bgr.com/feed/',
  'https://gizmodo.com/rss',
  'https://feeds.bloomberg.com/bloomberg/technologynews',
  'https://9to5mac.com/feed/',
  'http://feeds.businessinsider.com/businessinsider',
  'https://www.pcmag.com/feed',
  'http://feeds.reuters.com/reuters/technologyNews',
  'http://feeds.mashable.com/Mashable',
  'https://www.esquire.com/rss/all.xml',
  'https://www.cultofmac.com/feed/',
  'https://www.nytimes.com/wirecutter/feed/',
  'https://www.cnet.com/rss/news/',
  'https://feeds.marketwatch.com/marketwatch/topstories/',
  'https://www.macrumors.com/rss.php',
  'https://www.engadget.com/rss.xml',
  'http://fortune.com/feed/',
  'https://www.fastcompany.com/rss',
  'https://www.pcgamer.com/rss/'
];

async function fetchFeed(url) {
  const proxy = 'https://api.allorigins.win/raw?url=';
  const res = await fetch(proxy + encodeURIComponent(url));
  const text = await res.text();
  const parser = new DOMParser();
  const xml = parser.parseFromString(text, 'application/xml');
  const items = Array.from(xml.querySelectorAll('item, entry')).map(item => {
    const title = item.querySelector('title')?.textContent || '';
    const linkNode = item.querySelector('link');
    const linkAttr = linkNode?.getAttribute('href');
    const link = linkAttr || linkNode?.textContent || '';
    const pubNode = item.querySelector('pubDate') || item.querySelector('updated') || item.querySelector('published');
    const pubDate = pubNode ? new Date(pubNode.textContent) : null;
    return { title: title.trim(), link: link.trim(), pubDate };
  });
  return items;
}

async function loadFeeds() {
  let allItems = [];
  for (const feed of FEEDS) {
    try {
      const items = await fetchFeed(feed);
      allItems.push(...items);
    } catch (err) {
      console.error('Error fetching', feed, err);
    }
  }
  allItems.sort((a, b) => {
    const at = a.pubDate ? a.pubDate.getTime() : 0;
    const bt = b.pubDate ? b.pubDate.getTime() : 0;
    return bt - at;
  });
  const list = document.getElementById('list');
  const status = document.getElementById('status');
  if (allItems.length === 0) {
    status.textContent = 'No items found.';
    return;
  }
  status.style.display = 'none';
  list.style.display = 'block';
  allItems.slice(0, 50).forEach(item => {
    const li = document.createElement('li');
    const link = document.createElement('a');
    link.href = item.link;
    link.target = '_blank';
    link.rel = 'noopener noreferrer';
    link.textContent = item.title;
    li.appendChild(link);
    if (item.pubDate) {
      const dateSpan = document.createElement('span');
      dateSpan.className = 'date';
      dateSpan.textContent = item.pubDate.toLocaleString();
      li.appendChild(dateSpan);
    }
    list.appendChild(li);
  });
}

loadFeeds();
</script>
</body>
</html>
